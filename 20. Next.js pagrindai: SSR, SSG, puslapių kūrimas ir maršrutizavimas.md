## Įvadas į Next.js

**Next.js** yra galingas React karkasas, suteikiantis platų įrankių rinkinį šiuolaikinėms interneto programoms kurti. Jis siūlo integruotas funkcijas, tokias kaip server-side rendering (SSR), static site generation (SSG), API maršrutai ir paprasta maršrutizavimo sistema. Šios funkcijos daro Next.js puikiu pasirinkimu tiek mažoms, tiek didelėms interneto programoms.

### Next.js Pagrindiniai Privalumai

1.  **Server-Side Rendering (SSR):**
    
    -   SSR leidžia puslapius generuoti serveryje, o ne naršyklėje, todėl pagerėja našumas ir SEO. Serveris siunčia pilnai sugeneruotą puslapį klientui, kas gali padėti greičiau užkrauti puslapį.
2.  **Static Site Generation (SSG):**
    
    -   SSG generuoja HTML failus kūrimo metu, suteikdamas našumo privalumus, panašius į statinių svetainių. Šis metodas yra idealus turiniui, kuris nesikeičia dažnai, kaip pavyzdžiui, tinklaraščiai ar dokumentacija.
3.  **API Maršrutai:**
    
    -   Next.js leidžia sukurti API galinius taškus jūsų programoje. Ši funkcija yra naudinga, kai reikia apdoroti užklausas tiesiogiai iš priekinės dalies be atskiro serverio.
4.  **Failų Pagrindu Paremtas Maršrutizavimas:**
    
    -   Next.js supaprastina maršrutizavimą savo failų pagrindu paremtą sistemą, kur `pages` katalogo struktūra tiesiogiai atitinka programos maršrutus.
5.  **Vaizdų Optimizavimas:**
    
    -   Integruota vaizdų optimizavimo parama leidžia automatiškai keisti dydį, tingiai įkelti ir keisti formatą.
6.  **Integruota CSS ir Sass Parama:**
    
    -   Next.js turi integruotą CSS ir Sass palaikymą, todėl lengviau stilingi programą.
7.  **Greitas Atnaujinimas:**
    
    -   Momentinis grįžtamasis ryšys programuotojams su greitu atnaujinimu, leidžiantis kurti greičiau ir efektyviau.

### Next.js įdiegimas

Prieš pradedant, įsitikinkite, kad jūsų kompiuteryje įdiegta:

-   **Node.js**: Galite atsisiųsti iš [nodejs.org](https://nodejs.org/).
-   **npm**: Yra įtrauktas į Node.js paketą.

#### Next.js Projekto Sukūrimas

1.  **Naujo Projekto Inicijavimas:**
    
    Naudokite `create-next-app`, kad greitai sukurtumėte naują Next.js projektą:
    
	```javascript
	npx create-next-app my-nextjs-app
	```
	Eikite į savo projekto katalogą:

	```javascript
	cd my-nextjs-app
	```

2.  **Paleiskite Kūrimo Serverį:**
    
    Paleiskite kūrimo serverį naudodami šią komandą:
    
    bash
    
    Copy code
    
    `npm run dev` 
    
    Pagal nutylėjimą serveris bus pasiekiamas adresu http://localhost:3000.
    

#### Next.js Maršrutizavimo Tyrinėjimas

Next.js naudoja failų pagrindu paremtą maršrutizavimo sistemą. Panagrinėkime, kaip tai veikia, sukurdami keletą pagrindinių maršrutų.

1.  **Pagrindinis Puslapio Maršrutizavimas:**
    
    Sukurkite naują failą `pages` kataloge pavadinimu `about.js`:
    
	```javascript
	// pages/about.js

	export default function About() {
		return (
			<div>
				<h1>About Us</h1>
				<p>This is the about page of our Next.js application.</p>
			</div>
		);
	}
	```
    
    Eikite į http://localhost:3000/about, kad pamatytumėte savo naują puslapį.
    
2.  **Dinaminis Maršrutizavimas:**
    
    Next.js palaiko dinaminius maršrutus naudodamas skliaustus `[]`. Sukurkime dinaminį maršrutą tinklaraščio įrašams:
    
    Sukurkite failą pavadinimu `[id].js` kataloge `pages/posts`:
  
    ```javascript
    // pages/posts/[id].js
    
    import { useRouter } from 'next/router';
    
    export default function Post() {
      const router = useRouter();
      const { id } = router.query;
    
      return (
        <div>
          <h1>Blog Post {id}</h1>
          <p>This is the content of blog post {id}.</p>
        </div>
      );
    }
    ```
    
    Eikite į http://localhost:3000/posts/1 arba bet kurį kitą ID, kad pamatytumėte, kaip veikia dinaminiai maršrutai.
    
3.  **Įdėti Maršrutai:**
    
    Kurkite įdėtus maršrutus organizuodami savo failus kataloguose. Pavyzdžiui, sukurkite įdėtą maršrutą vartotojo profiliams:
    
    ```javascript
    // pages/users/[username].js
    
    import { useRouter } from 'next/router';
    
    export default function UserProfile() {
      const router = useRouter();
      const { username } = router.query;
    
      return (
        <div>
          <h1>User Profile: {username}</h1>
          <p>This is the profile page for {username}.</p>
        </div>
      );
    }
    ```
    
    Pasiekite vartotojo profilio puslapį adresu http://localhost:3000/users/johndoe.
    

### Next.js: Nuorodos Tarp Puslapių

Nuorodos tarp puslapių yra esminė bet kurios internetinės programos dalis, ir Next.js siūlo patogų būdą tai padaryti naudojant `next/link` komponentą. `Link` komponentas yra naudojamas navigacijai tarp puslapių, o jis turi būti naudojamas vietoj standartinio `<a>` elemento, kad būtų išlaikyta geriausia našumo praktika.

#### 1. Nuoroda į Kitą Puslapį

Sukurkime pagrindinį puslapį ir nuorodą į „Apie mus“ puslapį.

**`index.js`:**

```javascript
// pages/index.js

import Link from 'next/link';

export default function Home() {
  return (
    <div>
      <h1>Welcome to Our Next.js App!</h1>
      <p>Click the link below to learn more about us.</p>
      <Link href="/about">
        <a>Go to About Page</a>
      </Link>
    </div>
  );
}
```

-   **Link komponentas:** `Link` komponentas apgaubia `<a>` elementą ir naudoja `href` savybę norint nurodyti nuorodos tikslą. Tai leidžia navigacijai būti valdoma kliento pusėje, o ne sukelti viso puslapio perkrovimą.

#### 2. Grįžimas atgal

Kitas svarbus scenarijus yra grįžimas atgal į ankstesnį puslapį.

**`about.js`:**

```javascript
// pages/about.js

import Link from 'next/link';

export default function About() {
  return (
    <div>
      <h1>About Us</h1>
      <p>This is the about page of our Next.js application.</p>
      <Link href="/">
        <a>Go Back Home</a>
      </Link>
    </div>
  );
}
``` 

-   **Grįžimo Nuoroda:** Panašiai kaip ir prieš tai, `Link` komponentas yra naudojamas nuorodoms, leidžiančioms grįžti į pagrindinį puslapį. Tai leidžia lengvai kurti navigacinius kelius.

### Dinaminis Maršrutizavimas su Nuorodomis

**Next.js** taip pat leidžia lengvai naviguoti į dinaminius puslapius naudojant nuorodas. Panagrinėkime, kaip tai padaryti su dinaminiu tinklaraščio įrašo pavyzdžiu.

#### Dinaminio Turinio Generavimas su Nuorodomis

Sukurkime puslapį, kuriame būtų nuorodos į kelis dinaminius tinklaraščio įrašus.

**`posts/index.js`:**

```javascript
// pages/posts/index.js

import Link from 'next/link';

const posts = [
  { id: 1, title: 'First Post' },
  { id: 2, title: 'Second Post' },
  { id: 3, title: 'Third Post' },
];

export default function Posts() {
  return (
    <div>
      <h1>Blog Posts</h1>
      <ul>
        {posts.map((post) => (
          <li key={post.id}>
            <Link href={`/posts/${post.id}`}>
              <a>{post.title}</a>
            </Link>
          </li>
        ))}
      </ul>
      <Link href="/">
        <a>Go Back Home</a>
      </Link>
    </div>
  );
}
```

-   **Dinaminės Nuorodos:** `Link` komponentas naudoja šabloną `/posts/${post.id}` dinamiškai generuoti kiekvieno tinklaraščio įrašo maršrutą. Ši funkcija leidžia lengvai kurti turinio valdymo sistemas, kuriose yra daugybė skirtingų puslapių.

### Naudojant `useRouter` Navigacijai

Be `Link` komponento, **Next.js** taip pat siūlo `useRouter` kablys, leidžiantį programuotojams valdyti navigaciją su JavaScript.

#### Programiškai Pereiti Tarp Puslapių

Galite programuoti navigaciją be nuorodų, pavyzdžiui, vykdant tam tikrą funkciją ar įvykį.

**`navigate.js`:**

```javascript
// pages/navigate.js

import { useRouter } from 'next/router';

export default function Navigate() {
  const router = useRouter();

  const goToAboutPage = () => {
    router.push('/about');
  };

  return (
    <div>
      <h1>Programmatic Navigation Example</h1>
      <button onClick={goToAboutPage}>Go to About Page</button>
    </div>
  );
}
```
-   **`router.push`:** Naudojant `router.push()`, galite programiškai pereiti į kitą puslapį, nesukeliant viso puslapio perkrovimo. Tai leidžia valdyti naršymo logiką pagal įvairius įvykius ar būsenas.

#### Serverio Pusės Generavimas (SSR)

Next.js leidžia lengvai įgyvendinti SSR naudojant `getServerSideProps`. Ši funkcija veikia serveryje kiekvienai užklausai.

```javascript
// pages/ssr-example.js

export async function getServerSideProps() {
  // Fetch data from an API or database
  const data = await fetchData();

  return {
    props: {
      data,
    },
  };
}

export default function SSRExample({ data }) {
  return (
    <div>
      <h1>Server-Side Rendering Example</h1>
      <p>Data fetched from the server: {data}</p>
    </div>
  );
}
```
Kai prisijungsite prie http://localhost:3000/ssr-example, puslapis bus generuojamas serveryje, o klientas gaus pilnai sugeneruotą HTML.

#### Statinis Svetainės Generavimas (SSG)

SSG yra dar viena galinga Next.js funkcija, kuri generuoja statinį HTML kūrimo metu. Naudokite `getStaticProps` puslapiams, kurių duomenys nesikeičia dažnai.

```javascript
// pages/ssg-example.js

export async function getStaticProps() {
  // Fetch data from an API or database
  const data = await fetchData();

  return {
    props: {
      data,
    },
  };
}

export default function SSGExample({ data }) {
  return (
    <div>
      <h1>Static Site Generation Example</h1>
      <p>Data fetched at build time: {data}</p>
    </div>
  );
}
```

SSG puslapiai generuojami kūrimo metu, todėl reikia paleisti `npm run build`, o tada `npm run start`, kad pamatytumėte pakeitimus.

#### Inkrementinis Statinis Regeneravimas (ISR)

Next.js palaiko ISR, kuris leidžia atnaujinti statinius puslapius po kūrimo be būtinybės perkurti visą svetainę. Tai naudinga puslapiams, kuriuos reikia atnaujinti dažnai.

```javascript
// pages/isr-example.js

export async function getStaticProps() {
  const data = await fetchData();

  return {
    props: {
      data,
    },
    revalidate: 10, // Revalidate every 10 seconds
  };
}

export default function ISRExample({ data }) {
  return (
    <div>
      <h1>Incremental Static Regeneration Example</h1>
      <p>Data fetched with ISR: {data}</p>
    </div>
  );
}
``` 

Naudojant ISR, Next.js atnaujins puslapį ne daugiau kaip kartą kas `revalidate` sekundžių, jei bus pateikta užklausa.

##  Papildomi resursai

1.  **w3Schools** - **Next.js - Tutorial**: [Next.js - Tutorial](https://www.w3schools.io/learn/nextjs-tutorial/)
2.  **MDN Web Docs -  Static Site Generation (SSG) with Next.js**: [Static Site Generation (SSG) with Next.js](https://developer.mozilla.org/en-US/blog/static-site-generation-with-nextjs/)
3.  **Youtube video**: [Next js Tutorial for Beginners | Nextjs 13 (App Router) with TypeScript](https://www.youtube.com/watch?v=ZVnjOPwW4ZA&ab_channel=ProgrammingwithMosh)