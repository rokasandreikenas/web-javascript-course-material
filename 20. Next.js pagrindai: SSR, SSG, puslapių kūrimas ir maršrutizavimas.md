
## Įvadas į Next.js

**Next.js** yra galingas React karkasas, kuris suteikia platų įrankių rinkinį šiuolaikinėms interneto programoms kurti. Jis siūlo funkcijas, tokias kaip serverio pusės 'rendering' (SSR), statinė svetainės generacija (SSG), API maršrutai ir paprasta maršrutizavimo sistema. Šios funkcijos daro Next.js puikiu pasirinkimu tiek mažoms, tiek didelėms interneto programoms.

### Pagrindinės savybės

-   **Serverio pusės rendering (SSR)**: Pagerina našumą ir SEO.
-   **Statinė svetainės generacija (SSG)**: Statinis HTML generuojamas kūrimo metu, idealu turiniui, kuris nesikeičia dažnai.
-   **Inkrementinis statinis regeneravimas (ISR)**: Leidžia atnaujinti statinius puslapius po publikavimo be būtinybės perkurti visą svetainę.
-   **App Router**: Nauja maršrutizavimo sistema, kuri supaprastina navigaciją ir komponentų organizavimą.
-   **Integruota CSS ir Sass parama**: Sklandžiai integruoja stiliaus parinktis.

## Next.js projekto įdiegimas

Prieš pradedant, įsitikinkite, kad jūsų kompiuteryje įdiegta **Node.js** ir **npm**. Modulius galite atsisiųsti iš [nodejs.org](https://nodejs.org/).

### Naujo Next.js projekto kūrimas

1.  **Naudokite `create-next-app`, kad inicijuotumėte projektą**:
    
    Atidarykite terminalą ir paleiskite šią komandą:
    
    `npx create-next-app@latest my-nextjs-app` 
    
    Ši komanda sukurs naują Next.js projektą su pavadinimu `my-nextjs-app`.
    
2.  **Pereikite į savo projekto katalogą**:
    
    `cd my-nextjs-app` 
    
3.  **Paleiskite kūrimo serverį**:
    
    Paleiskite lokalų "build'o" serverį naudodami šią komandą:
    
    `npm run dev` 
    
    Pagal nutylėjimą serveris bus pasiekiamas adresu `http://localhost:3000`.

## App Router

`app` katalogas, pristatytas Next.js 13 versijoje, suteikia naują būdą apibrėžti maršrutus, išdėstymus ir komponentus.

### Bazinė programos struktūra

Štai bazinė projekto struktūra, naudojant `app` katalogą:

```javascript
my-nextjs-app/
├── app/
│   ├── layout.js
│   ├── page.js
│   ├── about/
│   │   └── page.js
│   ├── posts/
│   │   ├── [id]/
│   │   │   └── page.js
│   │   └── page.js
│   ├── users/
│   │   └── [username]/
│   │       └── page.js
└── package.json
```

### 'Layout' kūrimas

`layout.js` failas leidžia apibrėžti bendrą išdėstymą įdėtiems maršrutams. Šis failas yra būtinas `app` katalogui ir naudojamas apgaubti jūsų puslapius bendrais komponentais, tokiais kaip antraštės, poraštės ir navigacija.

```javascript
// app/layout.js

import './globals.css'; // Import global styles

export const metadata = {
  title: 'My Next.js App', // Set default metadata
  description: 'A simple Next.js application using the app router.',
};

export default function RootLayout({ children }) {
  return (
    <html lang="en">
      <body>
        <header>
          <h1>My Next.js App</h1>
          <nav>
            <a href="/">Home</a>
            <a href="/about">About</a>
            <a href="/posts">Posts</a>
          </nav>
        </header>
        <main>{children}</main>
        <footer>
          <p>© 2024 My Next.js App</p>
        </footer>
      </body>
    </html>
  );
}
```

-   **Metadata**: Naudokite `metadata` objektą, kad nustatytumėte puslapio pavadinimą ir aprašymą.
-   **HTML struktūra**: Naudokite `RootLayout`, kad apibrėžtumėte nuoseklią puslapių struktūrą.

### Puslapių kūrimas

#### Pradinis puslapis

`page.js` failas `app` kataloge yra jūsų programos įėjimo taškas. Tai numatytasis maršrutas `/`.

```javascript
// app/page.js

import Link from 'next/link';

export default function Home() {
  return (
    <div>
      <h1>Welcome to Our Next.js App!</h1>
      <p>Click the link below to learn more about us.</p>
      <Link href="/about">
        <a>Go to About Page</a>
      </Link>
    </div>
  );
}
```

-   **Nuorodos**: Naudokite `Link` komponentą klientų pusės navigacijai tarp puslapių.

#### Apie mus puslapis

Sukurkite `about` katalogą `app` kataloge ir pridėkite `page.js` failą, kad apibrėžtumėte `/about` maršrutą.

```javascript
// app/about/page.js

import Link from 'next/link';

export default function About() {
  return (
    <div>
      <h1>About Us</h1>
      <p>This is the about page of our Next.js application.</p>
      <Link href="/">
        <a>Go Back Home</a>
      </Link>
    </div>
  );
}
```

-   **Maršruto apibrėžimas**: `page.js` failas `app/about` kataloge atitinka `/about` maršrutą.

## Dinaminis maršrutizavimas su App Router

Dinaminis maršrutizavimas yra galinga Next.js funkcija, leidžianti kurti puslapius su dinaminiu turiniu pagal maršruto parametrus.

### Dinaminiai maršrutai tinklaraščio įrašams

Norėdami sukurti dinaminius maršrutus, naudokite skliaustus `[]` katalogo pavadinime.

```javascript
// app/posts/[id]/page.js

'use client';

import { useRouter } from 'next/navigation';

export default function Post() {
  const router = useRouter();
  const { id } = router.query;

  return (
    <div>
      <h1>Blog Post {id}</h1>
      <p>This is the content of blog post {id}.</p>
    </div>
  );
}
```

-   **Dinaminis parametras**: Pasiekite dinaminius maršruto parametrus naudodami `router.query`.

### Statinis maršrutas įrašų sąrašui

Sukurkite statinį maršrutą, kad išvardintumėte visus įrašus, leidžiant navigaciją į individualius dinaminius įrašų puslapius.

```javascript
// app/posts/page.js

import Link from 'next/link';

const posts = [
  { id: 1, title: 'First Post' },
  { id: 2, title: 'Second Post' },
  { id: 3, title: 'Third Post' },
];

export default function Posts() {
  return (
    <div>
      <h1>Blog Posts</h1>
      <ul>
        {posts.map((post) => (
          <li key={post.id}>
            <Link href={`/posts/${post.id}`}>
              <a>{post.title}</a>
            </Link>
          </li>
        ))}
      </ul>
      <Link href="/">
        <a>Go Back Home</a>
      </Link>
    </div>
  );
}
```

-   **Nuorodų generavimas**: Dinamiškai sukurkite nuorodas į kiekvieną tinklaraščio įrašą naudodami `map`.

### Įdėti maršrutai

Įdėti maršrutai leidžia sudėtingesnes maršrutizavimo scenarijas, organizuojant failus kataloguose.

```javascript
// app/users/[username]/page.js

'use client';

import { useRouter } from 'next/navigation';

export default function UserProfile() {
  const router = useRouter();
  const { username } = router.query;

  return (
    <div>
      <h1>User Profile: {username}</h1>
      <p>This is the profile page for {username}.</p>
    </div>
  );
}
```

-   **Įdėti katalogai**: Sukurkite įdėtus katalogus vartotojų profiliams, rezultatu bus tokie maršrutai kaip `/users/johndoe`.

## Serverio pusės 'rendering' (SSR)

Serverio pusės rendering leidžia jums sukurti puslapius serveryje. Tai gali pagerinti našumą ir SEO, pateikiant visiškai sugeneruotą HTML klientui.

### SSR įgyvendinimas

Norėdami įgyvendinti SSR, tiesiog naudokite serverio komponentus `app` kataloge.

```javascript
// app/ssr-example/page.js

export const metadata = {
  title: 'SSR Example',
};

export default async function SSRExample() {
  // Fetch data from an API or database
  const response = await fetch('https://jsonplaceholder.typicode.com/posts/1');
  const data = await response.json();

  return (
    <div>
      <h1>Server-Side Rendering Example</h1>
      <p>Data fetched from the server: {data.title}</p>
    </div>
  );
}
```

-   **Serverio komponentas**: Komponentai `app` kataloge yra serverio komponentai pagal numatymą, leidžiant SSR.
-   **Duomenų gavimas**: Atlikite duomenų gavimą tiesiai komponento viduje.

----------

## Statinė svetainės generacija (SSG)

SSG leidžia jums generuoti statinį HTML kūrimo metu, kas idealiai tinka turiniui, kuris nesikeičia dažnai.

### SSG įgyvendinimas

Naudokite `generateStaticParams`, kad gautumėte duomenis kūrimo metu `app` kataloge.

```javascript
// app/ssg-example/page.js

export const metadata = {
  title: 'SSG Example',
};

export default function SSGExample({ data }) {
  return (
    <div>
      <h1>Static Site Generation Example</h1>
      <p>Data fetched at build time: {data.title}</p>
    </div>
  );
}

export async function generateStaticParams() {
  const response = await fetch('https://jsonplaceholder.typicode.com/posts/1');
  const data = await response.json();

  return [
    {
      data,
    },
  ];
}
```

-   **Statiniai parametrai**: Naudokite `generateStaticParams`, kad iš anksto gautumėte duomenis kūrimo metu.
-   **Statinė generacija**: Puslapis sugeneruojamas vieną kartą kūrimo metu ir pateikiamas kaip statinis HTML.


## Inkrementinis statinis regeneravimas (ISR)

ISR leidžia jums atnaujinti statinius puslapius po publikavimo be būtinybės perkurti visą svetainę. Tai naudinga puslapiams, kuriuos reikia periodiškai atnaujinti.

### ISR įgyvendinimas

Nurodykite atnaujinimo intervalą naudodami `revalidate` eksporto funkciją.

```javascript
// app/isr-example/page.js

export const metadata = {
  title: 'ISR Example',
};

export default function ISRExample({ data }) {
  return (
    <div>
      <h1>Incremental Static Regeneration Example</h1>
      <p>Data fetched with ISR: {data.title}</p>
    </div>
  );
}

export async function generateStaticParams() {
  const response = await fetch('https://jsonplaceholder.typicode.com/posts/1');
  const data = await response.json();

  return [
    {
      data,
    },
  ];
}

export const revalidate = 10; // Revalidate every 10 seconds
```

-   **Atnaujinimas**: Nurodykite atnaujinimo intervalą naudodami `revalidate` eksporto funkciją.
-   **ISR**: Puslapis bus regeneruotas serveryje po nurodyto intervalo, jei bus pateikta užklausa.

## Papildomos funkcijos

### CSS ir Sass palaikymas

Next.js suteikia integruotą CSS ir Sass palaikymą, leidžiantį lengvai stilizuoti jūsų programą.

#### Globalūs stiliai

Importuokite globalius stilius į `layout.js`.

```css
/* app/globals.css */

body {
  font-family: Arial, sans-serif;
  margin: 0;
  padding: 0;
}
```

#### Modulinis CSS

Naudokite CSS modulius komponentų specifiniams stiliams.

```css
/* app/components/Button.module.css */

.button {
  background-color: blue;
  color: white;
  padding: 10px 20px;
  border: none;
  border-radius: 5px;
  cursor: pointer;
}
``` 

```javascript
// app/components/Button.js

import styles from './Button.module.css';

export default function Button({ children }) {
  return <button className={styles.button}>{children}</button>;
}
```

### API maršrutai

Next.js leidžia jums kurti API galinius taškus jūsų programoje, kas palengvina užklausų tvarkymą tiesiogiai.

#### API maršruto kūrimas

Sukurkite API maršrutą `app/api` kataloge.

```javascript
// app/api/hello/route.js

export async function GET(request) {
  return new Response(JSON.stringify({ message: 'Hello, world!' }), {
    headers: { 'Content-Type': 'application/json' },
  });
}
```

-   **API galinis taškas**: Prieigą prie API galinio taško galite gauti adresu `/api/hello`.
-   **Atsakymas**: Naudokite `Response` objektą, kad grąžintumėte duomenis.


##  Papildomi resursai

1.  **w3Schools** - **Next.js - Tutorial**: [Next.js - Tutorial](https://www.w3schools.io/learn/nextjs-tutorial/)
2.  **MDN Web Docs -  Static Site Generation (SSG) with Next.js**: [Static Site Generation (SSG) with Next.js](https://developer.mozilla.org/en-US/blog/static-site-generation-with-nextjs/)
3.  **Youtube video**: [Next js Tutorial for Beginners | Nextjs 13 (App Router) with TypeScript](https://www.youtube.com/watch?v=ZVnjOPwW4ZA&ab_channel=ProgrammingwithMosh)